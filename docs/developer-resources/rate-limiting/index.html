<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/developer-resources/rate-limiting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Rate Limiting | Talawa API Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs-api.talawa.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs-api.talawa.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs-api.talawa.io/docs/developer-resources/rate-limiting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rate Limiting | Talawa API Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs-api.talawa.io/docs/developer-resources/rate-limiting"><link data-rh="true" rel="alternate" href="https://docs-api.talawa.io/docs/developer-resources/rate-limiting" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs-api.talawa.io/docs/developer-resources/rate-limiting" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3de45663.css">
<script src="/assets/js/runtime~main.42e9b0ae.js" defer="defer"></script>
<script src="/assets/js/main.1112ccce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_XBA2" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.talawa.io/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logos/logo.png" alt="My Site Logo" class="themedComponent_b3SG themedComponent--light_mxnD"><img src="/img/logos/logo.png" alt="My Site Logo" class="themedComponent_b3SG themedComponent--dark_Femx"></div><b class="navbar__title text--truncate">Talawa</b></a><a href="https://docs.talawa.io/docs" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">General</a><a href="https://docs-mobile.talawa.io/docs" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Mobile Guide</a><a href="https://docs-admin.talawa.io/docs" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Admin Guide</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">API Guide</a><a href="https://docs-plugin.talawa.io/docs" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Plugin Guide</a><a href="https://demo.talawa.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/PalisadoesFoundation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://www.youtube.com/@PalisadoesOrganization" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Palisadoes Youtube channel"></a><div class="toggle_Y_nr colorModeToggle_A3HY"><button class="clean-btn toggleButton_r6Is toggleButtonDisabled_rcbD" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_PKhO"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_dYf1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_qpAE"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_V6iv"><div class="docsWrapper_UCDP"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_BJE9" type="button"></button><div class="docRoot_oqDE"><aside class="theme-doc-sidebar-container docSidebarContainer_wt6G"><div class="sidebarViewport_w_sB"><div class="sidebar_XsRH"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_q_R6"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/installation">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation/environment-variables">Environment Variables</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/developer-resources/introduction">Developer Resources</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-resources/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-resources/pnpm-scripts">PNPM Scripts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-resources/operation">Operation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-resources/graphql-filtering">GraphQL Filtering &amp; Pagination</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developer-resources/rate-limiting">Rate Limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-resources/testing">Testing &amp; Validation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-resources/troubleshooting">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/auto-docs/createServer/functions/createServer">Code Documentation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/docs/auto-schema/createServer/functions/createServer">Schema</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_dVoH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_qwHq"><div class="docItemContainer_Bcxn"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Ubij" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_dfUI"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer Resources</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Rate Limiting</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_IGrS theme-doc-toc-mobile tocMobile_moxP"><button type="button" class="clean-btn tocCollapsibleButton_eunz">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rate Limiting in GraphQL API</h1></header>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>This section outlines the approach used to calculate query costs and enforce rate limits in our GraphQL API. We leverage the <strong>Pothos Complexity Plugin</strong> to assign complexity values to each field and use the <strong>Leaky Bucket Algorithm</strong> for rate limiting.</p>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="rate-limiting-levels">Rate Limiting Levels<a href="#rate-limiting-levels" class="hash-link" aria-label="Direct link to Rate Limiting Levels" title="Direct link to Rate Limiting Levels">​</a></h2>
<p>Rate limiting is implemented at two broad levels:</p>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="1-web-server-level-global-rate-limiting">1. Web Server Level (Global Rate Limiting)<a href="#1-web-server-level-global-rate-limiting" class="hash-link" aria-label="Direct link to 1. Web Server Level (Global Rate Limiting)" title="Direct link to 1. Web Server Level (Global Rate Limiting)">​</a></h3>
<p><strong>Purpose:</strong></p>
<ul>
<li>Focuses on total incoming requests from the client.</li>
<li>Helps prevent abuse, ensures fair usage, and protects the server from being overwhelmed by excessive requests.</li>
<li>Prevents DDoS attacks and ensures stable server performance.</li>
</ul>
<p><strong>Implementation:</strong></p>
<ul>
<li>Implemented using web server software or middleware.</li>
<li>The number of total requests is calculated based on server capacity, database capacity, and other backend resources.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="2-api-level-user-specific-rate-limiting">2. API Level (User-Specific Rate Limiting)<a href="#2-api-level-user-specific-rate-limiting" class="hash-link" aria-label="Direct link to 2. API Level (User-Specific Rate Limiting)" title="Direct link to 2. API Level (User-Specific Rate Limiting)">​</a></h3>
<p><strong>Purpose:</strong></p>
<ul>
<li>Ensures that no single user monopolizes resources.</li>
<li>Particularly useful for GraphQL APIs where queries have varying complexities and resource intensities.</li>
</ul>
<p><strong>Implementation:</strong></p>
<ul>
<li>Each query’s cost is calculated based on the complexity of the requested data and nesting depth.</li>
<li>If a query’s cost exceeds the user’s quota, it is denied.</li>
<li>The user’s quota refills at a specific rate using the <strong>Leaky Bucket Algorithm</strong>.</li>
<li>User tracking is done via IP addresses.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="problems-with-traditional-http-rate-limiting">Problems with Traditional HTTP Rate Limiting<a href="#problems-with-traditional-http-rate-limiting" class="hash-link" aria-label="Direct link to Problems with Traditional HTTP Rate Limiting" title="Direct link to Problems with Traditional HTTP Rate Limiting">​</a></h2>
<p>While traditional HTTP rate limiting is effective for limiting the number of requests from a client, it has several limitations:</p>
<ol>
<li><strong>Uniform Request Cost Assumption</strong> – All requests are treated equally, even though some queries consume significantly more resources than others.</li>
<li><strong>Lack of Query Complexity Awareness</strong> – HTTP rate limiting does not account for query depth or computational cost, leading to inefficient resource allocation.</li>
<li><strong>Ineffective Against Costly Queries</strong> – Users can send fewer but highly complex queries that still overwhelm the system.</li>
<li><strong>Fixed Request Limits</strong> – Simple request-count-based limiting does not accommodate dynamic workloads or API-specific constraints.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="query-cost-calculation">Query Cost Calculation<a href="#query-cost-calculation" class="hash-link" aria-label="Direct link to Query Cost Calculation" title="Direct link to Query Cost Calculation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="methodology">Methodology<a href="#methodology" class="hash-link" aria-label="Direct link to Methodology" title="Direct link to Methodology">​</a></h3>
<ol>
<li>Explicitly assign a complexity value to each GraphQL field.</li>
<li>Scalar fields use a default cost assigned in the plugin configuration.</li>
<li>Object and list fields have assigned complexity costs, with additional costs for mutations.</li>
<li>Total query complexity is computed <strong>before execution</strong> to determine the cost.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="why-pre-execution-phase">Why Pre-Execution Phase?<a href="#why-pre-execution-phase" class="hash-link" aria-label="Direct link to Why Pre-Execution Phase?" title="Direct link to Why Pre-Execution Phase?">​</a></h3>
<ul>
<li>At this phase, the query syntax is already validated and exists in the GraphQL schema.</li>
<li>Complexity can be safely computed without processing invalid queries.</li>
<li>If the query’s cost exceeds the user&#x27;s quota, an error is thrown before execution.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="graphql-request-lifecycle">GraphQL Request Lifecycle<a href="#graphql-request-lifecycle" class="hash-link" aria-label="Direct link to GraphQL Request Lifecycle" title="Direct link to GraphQL Request Lifecycle">​</a></h2>
<div class="codeBlockContainer_Mfmy theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_m1J7"><pre tabindex="0" class="prism-code language-text codeBlock_LtNB thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_SFzs"><span class="token-line" style="color:#393A34"><span class="token plain">Incoming GraphQL Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─▶ Routing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  errors ◀─┴─▶ preParsing Hook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         errors ◀─┴─▶ Parsing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               errors ◀─┴─▶ preValidation Hook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      errors ◀─┴─▶ Validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            errors ◀─┴─▶ preExecution Hook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   errors ◀─┴─▶ Execution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         errors ◀─┴─▶ Resolution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                        └─▶ onResolution Hook</span><br></span></code></pre><div class="buttonGroup_un5i"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_DH0f" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_aMKT"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vefd"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="user-identification-for-rate-limiting">User Identification for Rate Limiting<a href="#user-identification-for-rate-limiting" class="hash-link" aria-label="Direct link to User Identification for Rate Limiting" title="Direct link to User Identification for Rate Limiting">​</a></h2>
<p>To enforce rate limits, we track user-specific quotas in Redis:</p>
<ul>
<li><strong>Authenticated Users:</strong> Identified using a combination of IP address and User ID.<!-- -->
<ul>
<li>Redis key: <code>rate-limit:user:ip</code></li>
</ul>
</li>
<li><strong>Unauthenticated Users:</strong> Identified using only the IP address.<!-- -->
<ul>
<li>Redis key: <code>rate-limit:ip</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="rate-limiting-using-the-leaky-bucket-algorithm">Rate Limiting Using the Leaky Bucket Algorithm<a href="#rate-limiting-using-the-leaky-bucket-algorithm" class="hash-link" aria-label="Direct link to Rate Limiting Using the Leaky Bucket Algorithm" title="Direct link to Rate Limiting Using the Leaky Bucket Algorithm">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="implementation-details">Implementation Details<a href="#implementation-details" class="hash-link" aria-label="Direct link to Implementation Details" title="Direct link to Implementation Details">​</a></h3>
<ul>
<li>The <strong>Leaky Bucket Algorithm</strong> controls query execution rate.</li>
<li>The bucket size and leak rate are configurable.</li>
<li>Each query&#x27;s cost is deducted from the user’s available quota.</li>
<li>The quota refills over time to ensure fair resource allocation.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="how-cost-is-deducted-and-refilled">How Cost is Deducted and Refilled<a href="#how-cost-is-deducted-and-refilled" class="hash-link" aria-label="Direct link to How Cost is Deducted and Refilled" title="Direct link to How Cost is Deducted and Refilled">​</a></h3>
<ol>
<li>
<p><strong>Deduction Process</strong></p>
<ul>
<li>Each time a user makes a GraphQL request, the total cost of the query is calculated.</li>
<li>If the cost does not exceed the available quota, it is deducted from the user’s remaining quota.</li>
<li>If the cost <strong>exceeds the available quota</strong>, the request is denied with an error.</li>
</ul>
</li>
<li>
<p><strong>Refilling Process</strong></p>
<ul>
<li>The quota refills gradually over time, following the <strong>Leaky Bucket Algorithm</strong>.</li>
<li>The refill rate is predefined (e.g., 10 points per second).</li>
<li>This ensures that users can send continuous requests at a controlled rate rather than consuming the entire quota at once.</li>
</ul>
</li>
<li>
<p><strong>Example of Quota Behavior</strong></p>
<ul>
<li>Assume a user has a quota of <strong>50 points</strong>.</li>
<li>The user sends a query with a cost of <strong>20 points</strong> → Remaining quota = <strong>30</strong>.</li>
<li>The user sends another query with a cost of <strong>40 points</strong> → Request <strong>denied</strong> (exceeds quota).</li>
<li>After 5 seconds (with a refill rate of 10 points/sec), the quota is restored to <strong>50 points</strong>, allowing further requests.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="error-handling">Error Handling<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling">​</a></h3>
<ul>
<li>If the query cost exceeds the available quota, an error is returned.</li>
<li>Users can retry requests once their quota refills over time.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="environment-variables-for-query-cost-configuration">Environment Variables for Query Cost Configuration<a href="#environment-variables-for-query-cost-configuration" class="hash-link" aria-label="Direct link to Environment Variables for Query Cost Configuration" title="Direct link to Environment Variables for Query Cost Configuration">​</a></h2>
<table><thead><tr><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>API_GRAPHQL_SCALAR_FIELD_COST</code></td><td>Cost assigned to scalar fields such as <code>id</code>, <code>name</code>, etc.</td></tr><tr><td><code>API_GRAPHQL_SCALAR_RESOLVER_FIELD_COST</code></td><td>Cost for scalar fields that require resolver logic.</td></tr><tr><td><code>API_GRAPHQL_OBJECT_FIELD_COST</code></td><td>Cost for object fields that return nested objects.</td></tr><tr><td><code>API_GRAPHQL_LIST_FIELD_COST</code></td><td>Cost for list fields that return an array of objects.</td></tr><tr><td><code>API_GRAPHQL_NON_PAGINATED_LIST_FIELD_COST</code></td><td>Higher cost for non-paginated lists to prevent large queries.</td></tr><tr><td><code>API_GRAPHQL_MUTATION_BASE_COST</code></td><td>Base cost for mutations, since they modify data.</td></tr><tr><td><code>API_GRAPHQL_SUBSCRIPTION_BASE_COST</code></td><td>Base cost for subscriptions, due to continuous real-time updates.</td></tr></tbody></table>
<p>These variables define how query complexity is calculated and ensure fair API usage.</p>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="example-queries">Example Queries<a href="#example-queries" class="hash-link" aria-label="Direct link to Example Queries" title="Direct link to Example Queries">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="simple-query">Simple Query<a href="#simple-query" class="hash-link" aria-label="Direct link to Simple Query" title="Direct link to Simple Query">​</a></h3>
<div class="language-graphql codeBlockContainer_Mfmy theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_m1J7"><pre tabindex="0" class="prism-code language-graphql codeBlock_LtNB thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_SFzs"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> </span><span class="token definition-query function" style="color:#d73a49">GetUserProfile</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">email</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_un5i"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_DH0f" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_aMKT"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vefd"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>Complexity Calculation:</strong>
<ul>
<li><code>user</code>: 1 (object field)</li>
<li><code>id</code>: 0 (scalar field)</li>
<li><code>name</code>: 0 (scalar field)</li>
<li><code>email</code>: 0 (scalar field)</li>
<li><strong>Total Cost: 1</strong></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="nested-query">Nested Query<a href="#nested-query" class="hash-link" aria-label="Direct link to Nested Query" title="Direct link to Nested Query">​</a></h3>
<div class="language-graphql codeBlockContainer_Mfmy theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_m1J7"><pre tabindex="0" class="prism-code language-graphql codeBlock_LtNB thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_SFzs"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> </span><span class="token definition-query function" style="color:#d73a49">GetUserWithCreator</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token object">creator</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_un5i"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_DH0f" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_aMKT"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vefd"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>Complexity Calculation:</strong>
<ul>
<li><code>user</code>: 1 (object field)</li>
<li><code>id</code>: 0 (scalar field)</li>
<li><code>name</code>: 0 (scalar field)</li>
<li><code>creator</code>: 1 (object field)</li>
<li><code>id</code> (inside creator): 0 (scalar field)</li>
<li><code>name</code> (inside creator): 0 (scalar field)</li>
<li><strong>Total Cost: 1 + 1 = 2</strong></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="relay-based-nested-query">Relay-Based Nested Query<a href="#relay-based-nested-query" class="hash-link" aria-label="Direct link to Relay-Based Nested Query" title="Direct link to Relay-Based Nested Query">​</a></h3>
<div class="language-graphql codeBlockContainer_Mfmy theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_m1J7"><pre tabindex="0" class="prism-code language-graphql codeBlock_LtNB thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_SFzs"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> </span><span class="token definition-query function" style="color:#d73a49">GetUserWithOrganizations</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query">signIn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">input</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">emailAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;testsuperadmin@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Pass@123&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token object">user</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property-query">organizationsWhereMember</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">after</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token object">pageInfo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">hasPreviousPage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token object">edges</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">cursor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token object">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">authenticationToken</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_un5i"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_DH0f" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_aMKT"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vefd"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>Complexity Calculation:</strong>
<ul>
<li><code>user</code>: 1 (object field)</li>
<li><code>organizationsWhereMember</code>: 1 (list field)</li>
<li><code>edges</code>: 2 (object field)</li>
<li><code>edges</code> fetched 5 times: 5 * 2 = 10</li>
<li><strong>Total Cost: 1 + 1 + 10 = 12</strong></li>
<li><code>pageInfo</code> is treated as a scalar and does not add to the cost because it is calculated every time regardless of whether the user requests it or not. Since it is an inherent part of pagination logic, including it in cost calculation would unfairly penalize users for standard pagination behavior.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_WZUO" id="simple-mutation">Simple Mutation<a href="#simple-mutation" class="hash-link" aria-label="Direct link to Simple Mutation" title="Direct link to Simple Mutation">​</a></h3>
<div class="language-graphql codeBlockContainer_Mfmy theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_m1J7"><pre tabindex="0" class="prism-code language-graphql codeBlock_LtNB thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_SFzs"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> </span><span class="token definition-mutation function" style="color:#d73a49">CreatePost</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query">createPost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">input</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">title</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;GraphQL Rate Limiting&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">content</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Understanding cost-based rate limiting.&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">title</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">content</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_un5i"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_DH0f" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_aMKT"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vefd"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>Complexity Calculation:</strong>
<ul>
<li><code>createPost</code>: <strong>10</strong> (mutation base cost)</li>
<li><code>id</code>: 0 (scalar field)</li>
<li><code>title</code>: 0 (scalar field)</li>
<li><code>content</code>: 0 (scalar field)</li>
<li><strong>Total Cost: 10</strong></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_WZUO" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2>
<ul>
<li><a href="https://docs.github.com/en/graphql/overview/rate-limits-and-node-limits-for-the-graphql-api" target="_blank" rel="noopener noreferrer">GitHub GraphQL API Rate Limits</a></li>
<li><a href="https://shopify.engineering/rate-limiting-graphql-apis-calculating-query-complexity" target="_blank" rel="noopener noreferrer">Shopify Engineering - Rate Limiting GraphQL APIs</a></li>
<li><a href="https://graphql-api-gateway.com/graphql-api-gateway-patterns/complexity-based-rate-limiting-quotas" target="_blank" rel="noopener noreferrer">GraphQL API Gateway Patterns - Complexity-Based Rate Limiting</a></li>
<li><a href="https://medium.com/@xuorig/a-guide-to-graphql-rate-limiting-security-e62a86ef8114" target="_blank" rel="noopener noreferrer">A Guide to GraphQL Rate Limiting &amp; Security</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/PalisadoesFoundation/talawa-api/edit/develop/docs/docs/docs/developer-resources/rate-limiting.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_IN1r" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_Jhbt"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/developer-resources/graphql-filtering"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GraphQL Filtering &amp; Pagination</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/developer-resources/testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Testing &amp; Validation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_yFYK thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#rate-limiting-levels" class="table-of-contents__link toc-highlight">Rate Limiting Levels</a><ul><li><a href="#1-web-server-level-global-rate-limiting" class="table-of-contents__link toc-highlight">1. Web Server Level (Global Rate Limiting)</a></li><li><a href="#2-api-level-user-specific-rate-limiting" class="table-of-contents__link toc-highlight">2. API Level (User-Specific Rate Limiting)</a></li></ul></li><li><a href="#problems-with-traditional-http-rate-limiting" class="table-of-contents__link toc-highlight">Problems with Traditional HTTP Rate Limiting</a></li><li><a href="#query-cost-calculation" class="table-of-contents__link toc-highlight">Query Cost Calculation</a><ul><li><a href="#methodology" class="table-of-contents__link toc-highlight">Methodology</a></li><li><a href="#why-pre-execution-phase" class="table-of-contents__link toc-highlight">Why Pre-Execution Phase?</a></li></ul></li><li><a href="#graphql-request-lifecycle" class="table-of-contents__link toc-highlight">GraphQL Request Lifecycle</a></li><li><a href="#user-identification-for-rate-limiting" class="table-of-contents__link toc-highlight">User Identification for Rate Limiting</a></li><li><a href="#rate-limiting-using-the-leaky-bucket-algorithm" class="table-of-contents__link toc-highlight">Rate Limiting Using the Leaky Bucket Algorithm</a><ul><li><a href="#implementation-details" class="table-of-contents__link toc-highlight">Implementation Details</a></li><li><a href="#how-cost-is-deducted-and-refilled" class="table-of-contents__link toc-highlight">How Cost is Deducted and Refilled</a></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error Handling</a></li></ul></li><li><a href="#environment-variables-for-query-cost-configuration" class="table-of-contents__link toc-highlight">Environment Variables for Query Cost Configuration</a></li><li><a href="#example-queries" class="table-of-contents__link toc-highlight">Example Queries</a><ul><li><a href="#simple-query" class="table-of-contents__link toc-highlight">Simple Query</a></li><li><a href="#nested-query" class="table-of-contents__link toc-highlight">Nested Query</a></li><li><a href="#relay-based-nested-query" class="table-of-contents__link toc-highlight">Relay-Based Nested Query</a></li><li><a href="#simple-mutation" class="table-of-contents__link toc-highlight">Simple Mutation</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/PalisadoesFoundation" target="_blank" rel="noopener noreferrer" class="footer__link-item footer__icon footer__slack">Slack</a></li><li class="footer__item"><a href="https://www.palisadoes.org/news/" target="_blank" rel="noopener noreferrer" class="footer__link-item footer__icon footer__news">News</a></li><li class="footer__item"><a href="https://www.palisadoes.org/contact/" target="_blank" rel="noopener noreferrer" class="footer__link-item footer__icon footer__contact">Contact Us</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social Media</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/palisadoesorg?lang=en" target="_blank" rel="noopener noreferrer" class="footer__link-item footer__icon footer__twitter"> Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/palisadoesproject/" target="_blank" rel="noopener noreferrer" class="footer__link-item footer__icon footer__facebook"> Facebook</a></li><li class="footer__item"><a href="https://www.instagram.com/palisadoes/?hl=en" target="_blank" rel="noopener noreferrer" class="footer__link-item footer__icon footer__instagram"> Instagram</a></li></ul></div><div class="col footer__col"><div class="footer__title">Development</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/PalisadoesFoundation" target="_blank" rel="noopener noreferrer" class="footer__link-item footer__icon footer__github"> GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 The Palisadoes Foundation, LLC. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>