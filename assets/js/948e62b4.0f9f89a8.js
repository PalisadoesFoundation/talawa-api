"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[37887],{21828:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"docs/developer-resources/best-practices/performance-monitoring","title":"Performance Monitoring","description":"Talawa API includes built-in performance monitoring to help DevOps teams track request-level performance metrics.","source":"@site/docs/docs/developer-resources/best-practices/performance-monitoring.md","sourceDirName":"docs/developer-resources/best-practices","slug":"/developer-resources/performance-monitoring","permalink":"/docs/developer-resources/performance-monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa-api/edit/develop/docs/docs/docs/developer-resources/best-practices/performance-monitoring.md","tags":[],"version":"current","sidebarPosition":60,"frontMatter":{"id":"performance-monitoring","title":"Performance Monitoring","slug":"/developer-resources/performance-monitoring","sidebar_position":60},"sidebar":"tutorialSidebar","previous":{"title":"Rate Limiting","permalink":"/docs/developer-resources/rate-limiting"},"next":{"title":"Error Handling Guide","permalink":"/docs/developer-resources/error-handling-guide"}}');var i=r(86070),t=r(55288);const c={id:"performance-monitoring",title:"Performance Monitoring",slug:"/developer-resources/performance-monitoring",sidebar_position:60},l="Performance Monitoring and Observability",d={},a=[{value:"Overview",id:"overview",level:2},{value:"How to Access Performance Monitoring",id:"how-to-access-performance-monitoring",level:2},{value:"Server-Timing Headers (Automatic)",id:"server-timing-headers-automatic",level:3},{value:"<code>/metrics/perf</code> Endpoint (API)",id:"metricsperf-endpoint-api",level:3},{value:"Programmatic Access (In Code)",id:"programmatic-access-in-code",level:3},{value:"Performance Metrics Reference",id:"performance-metrics-reference",level:2},{value:"Interpreting Metrics",id:"interpreting-metrics",level:3},{value:"Server-Timing Headers",id:"server-timing-headers",level:2},{value:"Header Components",id:"header-components",level:3},{value:"Viewing in Browser DevTools",id:"viewing-in-browser-devtools",level:3},{value:"<code>/metrics/perf</code> Endpoint",id:"metricsperf-endpoint",level:2},{value:"Accessing Metrics",id:"accessing-metrics",level:3},{value:"Response Schema",id:"response-schema",level:3},{value:"Retention",id:"retention",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Monitoring Dashboard",id:"monitoring-dashboard",level:3},{value:"APM Tool Integration",id:"apm-tool-integration",level:3},{value:"Custom Alerting",id:"custom-alerting",level:3},{value:"Metrics Configuration",id:"metrics-configuration",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Example Configuration",id:"example-configuration",level:3},{value:"Accessing Protected Metrics",id:"accessing-protected-metrics",level:3},{value:"Metrics Aggregation Output",id:"metrics-aggregation-output",level:3},{value:"Metrics Caching",id:"metrics-caching",level:3},{value:"Production Considerations",id:"production-considerations",level:2},{value:"Security",id:"security",level:3},{value:"Performance Impact",id:"performance-impact",level:3},{value:"Privacy",id:"privacy",level:3},{value:"Extending Performance Tracking",id:"extending-performance-tracking",level:2},{value:"Custom Operations",id:"custom-operations",level:3},{value:"Manual Timing",id:"manual-timing",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Metrics Not Appearing",id:"metrics-not-appearing",level:3},{value:"Endpoint Returns Empty Array",id:"endpoint-returns-empty-array",level:3},{value:"High <code>totalMs</code> Values",id:"high-totalms-values",level:3},{value:"Further Reading",id:"further-reading",level:2},{value:"Observability",id:"observability",level:2},{value:"Distributed Tracing",id:"distributed-tracing",level:3},{value:"Key Capabilities",id:"key-capabilities",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Environment Variables",id:"environment-variables-1",level:3},{value:"Configuration Source",id:"configuration-source",level:3},{value:"Tracing Initialization",id:"tracing-initialization",level:3},{value:"Key Design Principles",id:"key-design-principles",level:3},{value:"Local Development",id:"local-development",level:3},{value:"Example <code>.env</code>",id:"example-env",level:3},{value:"Start the server and make a request",id:"start-the-server-and-make-a-request",level:3},{value:"Expected Console Output (Example)",id:"expected-console-output-example",level:3},{value:"Sampling Behavior",id:"sampling-behavior",level:3},{value:"Example",id:"example",level:3},{value:"W3C Trace Context Propagation",id:"w3c-trace-context-propagation",level:3},{value:"Format",id:"format",level:3},{value:"Example",id:"example-1",level:3},{value:"Instrumentation",id:"instrumentation",level:3},{value:"Disabling Tracing",id:"disabling-tracing",level:3},{value:"Database Operation Tracing",id:"database-operation-tracing",level:3},{value:"Trace Hierarchy",id:"trace-hierarchy",level:4},{value:"Usage",id:"usage",level:4},{value:"Error Handling",id:"error-handling",level:4},{value:"Sample Output",id:"sample-output",level:4},{value:"Best Practices",id:"best-practices",level:4},{value:"Security",id:"security-1",level:4},{value:"Contributor Guidelines",id:"contributor-guidelines",level:4},{value:"Further Reading",id:"further-reading-1",level:4}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"performance-monitoring-and-observability",children:"Performance Monitoring and Observability"})}),"\n",(0,i.jsx)(n.p,{children:"Talawa API includes built-in performance monitoring to help DevOps teams track request-level performance metrics."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The Performance Metrics Foundation provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Server-Timing headers"})," on all HTTP responses for browser-based performance analysis"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"/metrics/perf"})," endpoint"]})," returning recent performance snapshots for monitoring dashboards"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Request-scoped tracking"})," of database operations, cache hits/misses, and total request duration"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"how-to-access-performance-monitoring",children:"How to Access Performance Monitoring"}),"\n",(0,i.jsx)(n.p,{children:"Performance monitoring is automatically enabled for all HTTP requests. There are three main ways to access performance metrics:"}),"\n",(0,i.jsx)(n.h3,{id:"server-timing-headers-automatic",children:"Server-Timing Headers (Automatic)"}),"\n",(0,i.jsxs)(n.p,{children:["Every HTTP response includes a ",(0,i.jsx)(n.code,{children:"Server-Timing"})," header with performance metrics. No configuration needed - it's automatically added to all responses."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Access via Browser DevTools:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open your browser's ",(0,i.jsx)(n.strong,{children:"Developer Tools"})," (F12 or right-click \u2192 Inspect)"]}),"\n",(0,i.jsxs)(n.li,{children:["Navigate to the ",(0,i.jsx)(n.strong,{children:"Network"})," tab"]}),"\n",(0,i.jsx)(n.li,{children:"Make any API request to your Talawa API server"}),"\n",(0,i.jsx)(n.li,{children:"Click on the request in the Network tab"}),"\n",(0,i.jsxs)(n.li,{children:["View the ",(0,i.jsx)(n.strong,{children:"Timing"})," or ",(0,i.jsx)(n.strong,{children:"Headers"})," section to see the ",(0,i.jsx)(n.code,{children:"Server-Timing"})," header"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Access via Command Line:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -v http://localhost:4000/graphql\n# Look for the "Server-Timing" header in the response\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"metricsperf-endpoint-api",children:[(0,i.jsx)(n.code,{children:"/metrics/perf"})," Endpoint (API)"]}),"\n",(0,i.jsx)(n.p,{children:"Query the metrics endpoint to retrieve recent performance snapshots programmatically:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET http://localhost:4000/metrics/perf\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "recent": [\n    {\n      "totalMs": 127.5,\n      "totalOps": 8,\n      "cacheHits": 12,\n      "cacheMisses": 3,\n      "hitRate": 0.8,\n      "ops": {\n        "db": { "count": 5, "ms": 45.2, "max": 18.3 }\n      },\n      "slow": [\n        { "op": "db", "ms": 18 }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Monitoring dashboards"}),"\n",(0,i.jsx)(n.li,{children:"Alerting systems"}),"\n",(0,i.jsx)(n.li,{children:"Performance analysis tools"}),"\n",(0,i.jsx)(n.li,{children:"Custom analytics"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"programmatic-access-in-code",children:"Programmatic Access (In Code)"}),"\n",(0,i.jsx)(n.p,{children:"Access the performance tracker directly in your GraphQL resolvers or route handlers:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"In GraphQL Resolvers:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"export const myResolver = async (parent, args, ctx) => {\n  // Access the performance tracker\n  const perf = ctx.perf;\n  \n  // Get current snapshot\n  const snapshot = perf?.snapshot();\n  console.log(`Total operations: ${snapshot?.totalOps}`);\n  \n  // Track custom operations\n  const result = await perf?.time('custom-operation', async () => {\n    // Your code here\n    return await someAsyncOperation();\n  });\n  \n  return result;\n};\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"In Route Handlers:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"app.get('/my-route', async (req, reply) => {\n  // Access via request object\n  const perf = req.perf;\n  const snapshot = perf?.snapshot();\n  \n  return { metrics: snapshot };\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Available Methods:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"perf.time(name, asyncFn)"})," - Track async operations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"perf.start(name)"})," - Start manual timing (returns stop function)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"perf.trackDb(ms)"})," - Track database operation duration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"perf.trackCacheHit()"})," - Record cache hit"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"perf.trackCacheMiss()"})," - Record cache miss"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"perf.trackComplexity(score)"})," - Track GraphQL query complexity"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"perf.snapshot()"})," - Get current performance snapshot"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"performance-metrics-reference",children:"Performance Metrics Reference"}),"\n",(0,i.jsx)(n.p,{children:"The following table explains all available performance metrics and their acceptable ranges:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Metric"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Acceptable Range"}),(0,i.jsx)(n.th,{children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"totalMs"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Total time (milliseconds) spent in all tracked operations during the request"}),(0,i.jsx)(n.td,{children:"< 500ms (good), < 1000ms (acceptable), > 1000ms (needs investigation)"}),(0,i.jsx)(n.td,{children:"Includes database queries, cache operations, and custom tracked operations. Does not include network latency or client processing time."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"totalOps"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Total count of tracked operations (database queries, cache operations, etc.)"}),(0,i.jsx)(n.td,{children:"Varies by endpoint. Simple queries: 1-5. Complex queries: 5-20. > 50 (may indicate N+1 problem)"}),(0,i.jsx)(n.td,{children:"Higher counts may indicate inefficient data fetching patterns. Monitor for sudden increases."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cacheHits"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Number of successful cache retrievals"}),(0,i.jsx)(n.td,{children:"Higher is better. Target: > 70% of total cache operations"}),(0,i.jsx)(n.td,{children:"Reduces database load and improves response times."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cacheMisses"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Number of cache lookups that required database queries"}),(0,i.jsx)(n.td,{children:"Lower is better. Target: < 30% of total cache operations"}),(0,i.jsx)(n.td,{children:"High miss rates indicate cache warming issues or short TTLs."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"hitRate"})}),(0,i.jsx)(n.td,{children:"number (0-1)"}),(0,i.jsxs)(n.td,{children:["Cache hit rate: ",(0,i.jsx)(n.code,{children:"cacheHits / (cacheHits + cacheMisses)"})]}),(0,i.jsx)(n.td,{children:"> 0.7 (good), 0.5-0.7 (acceptable), < 0.5 (needs optimization)"}),(0,i.jsx)(n.td,{children:"Calculated automatically. A value of 1.0 means all cache operations were hits."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ops[name].count"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Number of times a specific operation was called"}),(0,i.jsx)(n.td,{children:"Varies by operation type"}),(0,i.jsx)(n.td,{children:"Track individual operation frequency to identify hotspots."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ops[name].ms"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Total time (milliseconds) spent in a specific operation"}),(0,i.jsx)(n.td,{children:"Database: < 100ms per operation. Cache: < 10ms per operation"}),(0,i.jsxs)(n.td,{children:["Sum of all durations for this operation type. Divide by ",(0,i.jsx)(n.code,{children:"count"})," for average."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ops[name].max"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Maximum duration (milliseconds) for a single operation call"}),(0,i.jsx)(n.td,{children:"Database: < 200ms. Cache: < 50ms"}),(0,i.jsx)(n.td,{children:"Identifies slow outliers that may need optimization."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"slow"})}),(0,i.jsx)(n.td,{children:"Array"}),(0,i.jsx)(n.td,{children:"List of operations that exceeded the slow threshold (default: 200ms)"}),(0,i.jsx)(n.td,{children:"Empty array (ideal), < 5 entries (acceptable), > 10 entries (investigate)"}),(0,i.jsxs)(n.td,{children:["Each entry contains ",(0,i.jsx)(n.code,{children:"{ op: string, ms: number }"}),". Maximum 50 entries retained."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"complexityScore"})}),(0,i.jsx)(n.td,{children:"number (optional)"}),(0,i.jsx)(n.td,{children:"GraphQL query complexity score"}),(0,i.jsx)(n.td,{children:"< 100 (simple), 100-500 (moderate), 500-1000 (complex), > 1000 (very complex)"}),(0,i.jsx)(n.td,{children:"Only present for GraphQL requests. Higher scores indicate more expensive queries that may need optimization or rate limiting."})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"interpreting-metrics",children:"Interpreting Metrics"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Good Performance Indicators:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"totalMs"})," < 500ms for most requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hitRate"})," > 0.7 (70% cache hit rate)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"slow"})," array is empty or has < 5 entries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ops.db.max"})," < 200ms (no slow database queries)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Warning Signs:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"totalMs"})," consistently > 1000ms"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hitRate"})," < 0.5 (poor cache efficiency)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"slow"})," array frequently has > 10 entries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ops.db.max"})," > 500ms (very slow database queries)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"totalOps"})," > 50 (possible N+1 query problem)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Action Required:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"totalMs"})," > 2000ms (request timeout risk)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hitRate"})," < 0.3 (cache not working effectively)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"complexityScore"})," > 1000 (query may be too expensive)"]}),"\n",(0,i.jsxs)(n.li,{children:["Multiple operations with ",(0,i.jsx)(n.code,{children:"max"})," > 1000ms"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"server-timing-headers",children:"Server-Timing Headers"}),"\n",(0,i.jsxs)(n.p,{children:["Every API response includes a ",(0,i.jsx)(n.code,{children:"Server-Timing"})," header with performance breakdown:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Server-Timing: db;dur=45, cache;desc="hit:12|miss:3", total;dur=127\n'})}),"\n",(0,i.jsx)(n.h3,{id:"header-components",children:"Header Components"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Metric"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Example"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"db;dur=X"})}),(0,i.jsx)(n.td,{children:"Total database operation time (ms)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"db;dur=45"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'cache;desc="hit:X|miss:Y"'})}),(0,i.jsx)(n.td,{children:"Cache hit and miss counts"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'cache;desc="hit:12|miss:3"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"total;dur=X"})}),(0,i.jsx)(n.td,{children:"Total request duration (ms)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"total;dur=127"})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"viewing-in-browser-devtools",children:"Viewing in Browser DevTools"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open your browser's ",(0,i.jsx)(n.strong,{children:"Developer Tools"})," (F12)"]}),"\n",(0,i.jsxs)(n.li,{children:["Go to the ",(0,i.jsx)(n.strong,{children:"Network"})," tab"]}),"\n",(0,i.jsx)(n.li,{children:"Click on any API request"}),"\n",(0,i.jsxs)(n.li,{children:["View the ",(0,i.jsx)(n.strong,{children:"Timing"})," tab to see the Server-Timing breakdown"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing#browser_compatibility",alt:"Server Timing Example"})}),"\n",(0,i.jsx)(n.p,{children:"Modern browsers (Chrome, Firefox, Edge) automatically visualize these metrics."}),"\n",(0,i.jsxs)(n.h2,{id:"metricsperf-endpoint",children:[(0,i.jsx)(n.code,{children:"/metrics/perf"})," Endpoint"]}),"\n",(0,i.jsx)(n.h3,{id:"accessing-metrics",children:"Accessing Metrics"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET http://localhost:4000/metrics/perf\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "recent": [\n    {\n      "totalMs": 127.5,\n      "cacheHits": 12,\n      "cacheMisses": 3,\n      "ops": {\n        "db": { "count": 5, "ms": 45.2, "max": 18.3 },\n        "query": { "count": 3, "ms": 32.1, "max": 15.8 }\n      }\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"response-schema",children:"Response Schema"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"recent"})}),(0,i.jsx)(n.td,{children:"Array"}),(0,i.jsx)(n.td,{children:"Last 50 performance snapshots (limited for memory)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"totalMs"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Total time spent in tracked operations"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cacheHits"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Number of cache hits during request"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cacheMisses"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Number of cache misses during request"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ops"})}),(0,i.jsx)(n.td,{children:"Object"}),(0,i.jsx)(n.td,{children:"Operation-level statistics"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ops[name].count"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Number of times operation was called"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ops[name].ms"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Total milliseconds spent in operation"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ops[name].max"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Maximum duration for single operation call"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"retention",children:"Retention"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"In-Memory Storage"}),": Last 200 snapshots are kept in memory"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint Returns"}),": Maximum 50 most recent snapshots"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No Persistence"}),": Metrics reset on server restart"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,i.jsx)(n.h3,{id:"monitoring-dashboard",children:"Monitoring Dashboard"}),"\n",(0,i.jsxs)(n.p,{children:["Poll the ",(0,i.jsx)(n.code,{children:"/metrics/perf"})," endpoint to display real-time performance:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Fetch performance metrics every 5 seconds\nsetInterval(async () => {\n  const response = await fetch('http://localhost:4000/metrics/perf');\n  const data = await response.json();\n  \n  // Display average database time\n  const avgDbTime = data.recent\n    .map(s => s.ops.db?.ms || 0)\n    .reduce((a, b) => a + b, 0) / data.recent.length;\n  \n  console.log(`Avg DB time: ${avgDbTime.toFixed(2)}ms`);\n}, 5000);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"apm-tool-integration",children:"APM Tool Integration"}),"\n",(0,i.jsxs)(n.p,{children:["Many Application Performance Monitoring (APM) tools automatically capture ",(0,i.jsx)(n.code,{children:"Server-Timing"})," headers:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"New Relic"}),": Automatically captures custom timing metrics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Datadog"}),": RUM integration reads Server-Timing headers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Elastic APM"}),": Correlates server-side timing with user experience"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"custom-alerting",children:"Custom Alerting"}),"\n",(0,i.jsxs)(n.p,{children:["Monitor for slow requests using the ",(0,i.jsx)(n.code,{children:"/metrics/perf"})," endpoint:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import requests\nimport time\n\nTHRESHOLD_MS = 500  # Alert on requests > 500ms\n\nwhile True:\n    response = requests.get('http://localhost:4000/metrics/perf')\n    data = response.json()\n    \n    slow_requests = [s for s in data['recent'] if s['totalMs'] > THRESHOLD_MS]\n    \n    if slow_requests:\n        print(f\"\u26a0\ufe0f  {len(slow_requests)} slow requests detected!\")\n        for req in slow_requests:\n            print(f\"  - Total: {req['totalMs']}ms, DB: {req['ops'].get('db', {}).get('ms', 0)}ms\")\n    \n    time.sleep(10)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"metrics-configuration",children:"Metrics Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,i.jsx)(n.p,{children:"The metrics aggregation system is configurable through the following environment variables:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_ENABLED"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Master switch to enable or disable metrics collection and aggregation"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_AGGREGATION_ENABLED"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Enable or disable the metrics aggregation background worker"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_AGGREGATION_CRON_SCHEDULE"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"*/5 * * * *"})}),(0,i.jsx)(n.td,{children:"Cron schedule for running metrics aggregation (default: every 5 minutes)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_AGGREGATION_WINDOW_MINUTES"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"5"})}),(0,i.jsx)(n.td,{children:"Time window in minutes for aggregating snapshots"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_SNAPSHOT_RETENTION_COUNT"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1000"})}),(0,i.jsx)(n.td,{children:"Maximum number of performance snapshots to retain in memory"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_SLOW_OPERATION_MS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"200"})}),(0,i.jsx)(n.td,{children:"Threshold in milliseconds for considering an operation as slow"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_SLOW_REQUEST_MS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"500"})}),(0,i.jsx)(n.td,{children:"Threshold in milliseconds for considering a request as slow"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_CACHE_TTL_SECONDS"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"300"})}),(0,i.jsx)(n.td,{children:"Time-to-live in seconds for cached aggregated metrics (5 minutes)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"API_METRICS_API_KEY"})}),(0,i.jsx)(n.td,{children:"(none)"}),(0,i.jsxs)(n.td,{children:["API key to protect the ",(0,i.jsx)(n.code,{children:"/metrics/perf"})," endpoint. When set, requests require ",(0,i.jsx)(n.code,{children:"Authorization: Bearer <key>"})," header"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Enable metrics collection (default: true)\nAPI_METRICS_ENABLED=true\n\n# Enable metrics aggregation (default: true)\nAPI_METRICS_AGGREGATION_ENABLED=true\n\n# Run aggregation every 10 minutes\nAPI_METRICS_AGGREGATION_CRON_SCHEDULE="*/10 * * * *"\n\n# Aggregate last 10 minutes of snapshots\nAPI_METRICS_AGGREGATION_WINDOW_MINUTES=10\n\n# Keep last 2000 snapshots in memory\nAPI_METRICS_SNAPSHOT_RETENTION_COUNT=2000\n\n# Configure slow operation threshold (default: 200ms)\nAPI_METRICS_SLOW_OPERATION_MS=300\n\n# Configure slow request threshold (default: 500ms)\nAPI_METRICS_SLOW_REQUEST_MS=1000\n\n# Configure metrics cache TTL (default: 300 seconds)\nAPI_METRICS_CACHE_TTL_SECONDS=600\n\n# Protect metrics endpoint with API key (recommended for production)\nAPI_METRICS_API_KEY=your-secure-api-key-here\n'})}),"\n",(0,i.jsx)(n.h3,{id:"accessing-protected-metrics",children:"Accessing Protected Metrics"}),"\n",(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.code,{children:"API_METRICS_API_KEY"})," is set, access the metrics endpoint with:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer your-secure-api-key-here" \\\n  http://localhost:4000/metrics/perf\n'})}),"\n",(0,i.jsx)(n.h3,{id:"metrics-aggregation-output",children:"Metrics Aggregation Output"}),"\n",(0,i.jsx)(n.p,{children:"The background worker aggregates performance snapshots and logs the results to the standard output. This provides a periodic summary of system performance without needing to query the API."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Log Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "level": 30,\n  "time": 1705234567890,\n  "msg": "Metrics aggregation completed successfully",\n  "duration": "15ms",\n  "windowMinutes": 5,\n  "snapshotCount": 120,\n  "requestCount": 120,\n  "operationCount": 4,\n  "slowOperationCount": 2,\n  "cacheHitRate": "85.50%"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"windowMinutes"}),": Time window used for aggregation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"snapshotCount"}),": Number of snapshots processed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"requestCount"}),": Total requests in the window"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"slowOperationCount"}),": Number of operations potentially needing optimization"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"cacheHitRate"}),": Global cache efficiency for the period"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"metrics-caching",children:"Metrics Caching"}),"\n",(0,i.jsx)(n.p,{children:"Aggregated metrics can be cached to improve performance when accessing metrics data. The metrics cache service provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Timestamp-based caching"}),": Cache metrics by timestamp identifier"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Time-windowed caching"}),": Cache hourly and daily aggregations with longer TTLs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configurable TTL"}),": Control cache expiration via ",(0,i.jsx)(n.code,{children:"API_METRICS_CACHE_TTL_SECONDS"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Cache Key Patterns:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Timestamp-based: ",(0,i.jsx)(n.code,{children:"talawa:v1:metrics:aggregated:{timestamp}"})]}),"\n",(0,i.jsxs)(n.li,{children:["Hourly: ",(0,i.jsx)(n.code,{children:"talawa:v1:metrics:aggregated:hourly:{YYYY-MM-DD-HH}"})]}),"\n",(0,i.jsxs)(n.li,{children:["Daily: ",(0,i.jsx)(n.code,{children:"talawa:v1:metrics:aggregated:daily:{YYYY-MM-DD}"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Default TTLs:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Timestamp-based metrics: 300 seconds (5 minutes)"}),"\n",(0,i.jsx)(n.li,{children:"Hourly aggregations: 3600 seconds (1 hour)"}),"\n",(0,i.jsx)(n.li,{children:"Daily aggregations: 86400 seconds (24 hours)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The metrics cache service is automatically initialized when the performance plugin starts and is available via ",(0,i.jsx)(n.code,{children:"fastify.metricsCache"}),". Cache failures are handled gracefully and do not affect metrics collection."]}),"\n",(0,i.jsx)(n.h2,{id:"production-considerations",children:"Production Considerations"}),"\n",(0,i.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u26a0\ufe0f IMPORTANT"}),": The ",(0,i.jsx)(n.code,{children:"/metrics/perf"})," endpoint supports API key authentication via the ",(0,i.jsx)(n.code,{children:"API_METRICS_API_KEY"})," environment variable. For production deployments:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Set ",(0,i.jsx)(n.code,{children:"API_METRICS_API_KEY"})]})," to protect the endpoint (recommended)"]}),"\n",(0,i.jsx)(n.li,{children:"Use network-level controls (VPN, internal-only access) as additional security"}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"API_METRICS_API_KEY"})," is not set, the endpoint is unprotected (suitable for development only)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"performance-impact",children:"Performance Impact"}),"\n",(0,i.jsx)(n.p,{children:"The performance tracking system is designed to be lightweight:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory overhead"}),": ~200 snapshots \xd7 ~500 bytes = ~100KB"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CPU overhead"}),": Negligible (simple timestamp math)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No I/O"}),": All metrics stored in-memory, no database writes"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"privacy",children:"Privacy"}),"\n",(0,i.jsxs)(n.p,{children:["Performance metrics ",(0,i.jsx)(n.strong,{children:"do not contain PII"})," (Personally Identifiable Information):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Operation counts and timings"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Cache statistics"}),"\n",(0,i.jsx)(n.li,{children:"\u274c User IDs, emails, or other personal data"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Request/response payloads"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"extending-performance-tracking",children:"Extending Performance Tracking"}),"\n",(0,i.jsx)(n.h3,{id:"custom-operations",children:"Custom Operations"}),"\n",(0,i.jsx)(n.p,{children:"Track custom operations in your code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// In a GraphQL resolver\nexport const myResolver = async (parent, args, ctx) => {\n  // Track external API call\n  const result = await ctx.request.perf?.time('external-api', async () => {\n    return await fetch('https://api.example.com/data');\n  });\n  \n  return result;\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"manual-timing",children:"Manual Timing"}),"\n",(0,i.jsx)(n.p,{children:"For non-async operations:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const stopTimer = ctx.request.perf?.start('computation');\n// ... expensive computation ...\nstopTimer?.();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"metrics-not-appearing",children:"Metrics Not Appearing"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check plugin registration"}),": Ensure ",(0,i.jsx)(n.code,{children:"performance.ts"})," plugin is loaded in ",(0,i.jsx)(n.code,{children:"src/fastifyPlugins/index.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify headers"}),": Use ",(0,i.jsx)(n.code,{children:"curl -v"})," to inspect response headers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Browser compatibility"}),": Ensure browser supports Server-Timing (Chrome 65+, Firefox 61+)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-returns-empty-array",children:"Endpoint Returns Empty Array"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Normal on server restart (metrics are in-memory)"}),"\n",(0,i.jsx)(n.li,{children:"Make some API requests to populate snapshots"}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"high-totalms-values",children:["High ",(0,i.jsx)(n.code,{children:"totalMs"})," Values"]}),"\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.code,{children:"totalMs"})," is unexpectedly high:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Check ",(0,i.jsx)(n.code,{children:"ops.db.ms"})," for slow database queries"]}),"\n",(0,i.jsxs)(n.li,{children:["Review ",(0,i.jsx)(n.code,{children:"cacheMisses"})," count (high misses = more DB hits)"]}),"\n",(0,i.jsx)(n.li,{children:"Inspect individual operation max times for bottlenecks"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Server-Timing",children:"MDN: Server-Timing"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://w3c.github.io/server-timing/",children:"W3C Server Timing Specification"})}),"\n",(0,i.jsxs)(n.li,{children:["Implementation: ",(0,i.jsx)(n.code,{children:"src/fastifyPlugins/performance.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:["Tracker utility: ",(0,i.jsx)(n.code,{children:"src/utilities/metrics/performanceTracker.ts"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"observability",children:"Observability"}),"\n",(0,i.jsxs)(n.p,{children:["This document describes the observability setup for ",(0,i.jsx)(n.strong,{children:"Talawa API"}),", focusing on ",(0,i.jsx)(n.strong,{children:"distributed tracing using OpenTelemetry"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Talawa API uses OpenTelemetry to provide end-to-end visibility into incoming requests, internal processing, and outgoing calls. This helps with debugging, performance analysis, and production monitoring."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"distributed-tracing",children:"Distributed Tracing"}),"\n",(0,i.jsxs)(n.p,{children:["Talawa API uses the ",(0,i.jsx)(n.strong,{children:"OpenTelemetry Node SDK"})," with ",(0,i.jsx)(n.strong,{children:"automatic instrumentation"})," and ",(0,i.jsx)(n.strong,{children:"W3C Trace Context propagation"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"key-capabilities",children:"Key Capabilities"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"End-to-end request tracing"}),"\n",(0,i.jsx)(n.li,{children:"Context propagation across services"}),"\n",(0,i.jsx)(n.li,{children:"Configurable sampling"}),"\n",(0,i.jsx)(n.li,{children:"Zero-overhead when disabled"}),"\n",(0,i.jsx)(n.li,{children:"Console-based tracing for local development"}),"\n",(0,i.jsx)(n.li,{children:"OTLP-based exporting for production"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SDK"}),": OpenTelemetry Node SDK (",(0,i.jsx)(n.code,{children:"@opentelemetry/sdk-node"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Propagation"}),": W3C Trace Context (",(0,i.jsx)(n.code,{children:"traceparent"})," header)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sampling"}),": Parent-based with ratio sampling"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Exporters"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Console exporter (local)"}),"\n",(0,i.jsx)(n.li,{children:"OTLP HTTP exporter (non-local)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instrumentation"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"HTTP (incoming & outgoing requests)"}),"\n",(0,i.jsx)(n.li,{children:"Fastify (routes, hooks, handlers)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Tracing behavior is controlled through environment variables and centralized in ",(0,i.jsx)(n.code,{children:"observabilityConfig"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"environment-variables-1",children:"Environment Variables"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Values"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"API_OTEL_ENABLED"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Enable or disable tracing"}),(0,i.jsx)(n.td,{children:"true, false"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"API_OTEL_ENVIRONMENT"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Runtime environment"}),(0,i.jsx)(n.td,{children:"local, production"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"API_OTEL_EXPORTER_OTLP_ENDPOINT"}),(0,i.jsx)(n.td,{children:"No*"}),(0,i.jsx)(n.td,{children:"OTLP HTTP endpoint"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"http://localhost:4000/v1/traces",children:"http://localhost:4000/v1/traces"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"API_OTEL_SAMPLING_RATIO"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Trace sampling ratio (0--1)"}),(0,i.jsx)(n.td,{children:"[0.1, 1]"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"API_OTEL_SERVICE_NAME"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Service identifier"}),(0,i.jsx)(n.td,{children:"talawa-api"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"configuration-source",children:"Configuration Source"}),"\n",(0,i.jsx)(n.p,{children:"All observability settings are centralized in:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"config/observability.ts"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'import dotenv from "dotenv";\ndotenv.config();\n\nexport const observabilityConfig = {\n  enabled: process.env.API_OTEL_ENABLED === "true",\n  environment: process.env.API_OTEL_ENVIRONMENT ?? "local",\n  serviceName: process.env.API_OTEL_SERVICE_NAME ?? "talawa-api",\n  samplingRatio: Number(process.env.API_OTEL_SAMPLING_RATIO ?? "1"),\n  otlpEndpoint:\n    process.env.API_OTEL_EXPORTER_OTLP_ENDPOINT ??\n    "http://localhost:4318/v1/traces",\n};\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"tracing-initialization",children:"Tracing Initialization"}),"\n",(0,i.jsx)(n.p,{children:"Tracing is initialized explicitly via an async bootstrap function:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"initTracing()"})}),"\n",(0,i.jsx)(n.h3,{id:"key-design-principles",children:"Key Design Principles"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Tracing is ",(0,i.jsx)(n.strong,{children:"skipped entirely"})," if disabled"]}),"\n",(0,i.jsxs)(n.li,{children:["SDK initialization happens ",(0,i.jsx)(n.strong,{children:"once at startup"})]}),"\n",(0,i.jsx)(n.li,{children:"Instrumentation is registered before Fastify is loaded"}),"\n",(0,i.jsx)(n.li,{children:"Graceful shutdown ensures all spans are flushed"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"local-development",children:"Local Development"}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.code,{children:"local"})," environment, traces are printed directly to the console using ",(0,i.jsx)(n.code,{children:"ConsoleSpanExporter"}),"."]}),"\n",(0,i.jsxs)(n.h3,{id:"example-env",children:["Example ",(0,i.jsx)(n.code,{children:".env"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"API_OTEL_ENABLED=true\nAPI_OTEL_ENVIRONMENT=local\nAPI_OTEL_SERVICE_NAME=talawa-api\nAPI_OTEL_SAMPLING_RATIO=1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"start-the-server-and-make-a-request",children:"Start the server and make a request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"curl http://localhost:4000/graphql\n"})}),"\n",(0,i.jsx)(n.h3,{id:"expected-console-output-example",children:"Expected Console Output (Example)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "traceId": "347cb51fc1fd41662d768bb1142acff1",\n  "id": "fd6b2a8046d8cc77",\n  "name": "GET",\n  "kind": 1,\n  "duration": 19356.5,\n  "attributes": {\n    "http.method": "GET",\n    "http.target": "/graphql",\n    "http.status_code": 200\n  },\n  "status": { "code": 0 }\n}\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["This represents the ",(0,i.jsx)(n.strong,{children:"root SERVER span"})," for the incoming HTTP request."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"sampling-behavior",children:"Sampling Behavior"}),"\n",(0,i.jsxs)(n.p,{children:["Talawa API uses ",(0,i.jsx)(n.strong,{children:"parent-based sampling"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If a parent span exists \u2192 follow the parent's decision"}),"\n",(0,i.jsxs)(n.li,{children:["If the span is a root span \u2192 apply ",(0,i.jsx)(n.code,{children:"TraceIdRatioBasedSampler"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"API_OTEL_SAMPLING_RATIO=0.1\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"~10% of new root traces will be sampled"}),"\n",(0,i.jsx)(n.li,{children:"Child spans automatically inherit the decision"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This allows high-volume production systems to reduce telemetry cost without losing trace continuity."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"w3c-trace-context-propagation",children:"W3C Trace Context Propagation"}),"\n",(0,i.jsxs)(n.p,{children:["Talawa API automatically propagates trace context using the standard ",(0,i.jsx)(n.code,{children:"traceparent"})," header."]}),"\n",(0,i.jsx)(n.h3,{id:"format",children:"Format"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"traceparent: 00-{trace-id}-{parent-id}-{trace-flags}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'curl -H "traceparent: 00-a1b2c3d4e5f67890abcdef1234567890-1234567890abcdef-01"\\\n  http://localhost:4000/graphql\n'})}),"\n",(0,i.jsx)(n.p,{children:"Behavior:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Incoming traces are ",(0,i.jsx)(n.strong,{children:"continued"}),", not restarted"]}),"\n",(0,i.jsx)(n.li,{children:"Outgoing HTTP calls automatically forward the context"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"instrumentation",children:"Instrumentation"}),"\n",(0,i.jsx)(n.p,{children:"The following instrumentations are enabled by default:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"HTTP Instrumentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Incoming requests"}),"\n",(0,i.jsx)(n.li,{children:"Outgoing HTTP calls"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fastify Instrumentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Route handlers"}),"\n",(0,i.jsx)(n.li,{children:"Lifecycle hooks"}),"\n",(0,i.jsx)(n.li,{children:"Middleware"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Instrumentation is registered during SDK initialization and must occur ",(0,i.jsx)(n.strong,{children:"before Fastify is imported"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Additional instrumentations (e.g. database, GraphQL resolvers) can be added later."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"disabling-tracing",children:"Disabling Tracing"}),"\n",(0,i.jsx)(n.p,{children:"Tracing can be completely disabled with zero overhead:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"API_OTEL_ENABLED=false\n"})}),"\n",(0,i.jsx)(n.p,{children:"When disabled:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"SDK is not initialized"}),"\n",(0,i.jsx)(n.li,{children:"No instrumentation is registered"}),"\n",(0,i.jsx)(n.li,{children:"No performance impact is introduced"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"database-operation-tracing",children:"Database Operation Tracing"}),"\n",(0,i.jsxs)(n.p,{children:["Talawa API instruments database operations using the ",(0,i.jsx)(n.code,{children:"traceable"})," utility, providing visibility into database queries through DataLoaders."]}),"\n",(0,i.jsx)(n.h4,{id:"trace-hierarchy",children:"Trace Hierarchy"}),"\n",(0,i.jsx)(n.p,{children:"Database operations create child spans under their parent context:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"HTTP Request \u2192 GraphQL Resolver \u2192 DataLoader \u2192 db:users.batchLoad\n"})}),"\n",(0,i.jsx)(n.p,{children:"This enables end-to-end tracing, bottleneck identification, and N+1 query detection."}),"\n",(0,i.jsx)(n.h4,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Import:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import { traceable } from "~/src/utilities/db/traceableQuery";\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Basic Usage:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'const users = await traceable("users", "batchLoad", async () => {\n  return await db.select().from(usersTable).where(inArray(usersTable.id, userIds));\n});\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"DataLoader Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'export const createUserLoader = (): DataLoader<string, User | null> => {\n  return new DataLoader(async (userIds) => {\n    const rows = await traceable("users", "batchLoad", async () => {\n      return await db.select().from(usersTable).where(inArray(usersTable.id, [...userIds]));\n    });\n    const userMap = new Map(rows.map((user) => [user.id, user]));\n    return userIds.map((id) => userMap.get(id) ?? null);\n  });\n};\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Span Attributes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"db.system"}),": ",(0,i.jsx)(n.code,{children:'"postgresql"'})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"db.operation"}),": Operation type (e.g., ",(0,i.jsx)(n.code,{children:'"batchLoad"'}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"db.model"}),": Table name (e.g., ",(0,i.jsx)(n.code,{children:'"users"'}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"Errors are automatically captured with stack traces and marked with ERROR status. The error is then re-thrown for normal application handling."}),"\n",(0,i.jsx)(n.h4,{id:"sample-output",children:"Sample Output"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Local Console Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "db:users.batchLoad",\n  "traceId": "347cb51fc1fd41662d768bb1142acff1",\n  "parentId": "a8f3d9e2c1b4a567",\n  "duration": 45238.125,\n  "attributes": {\n    "db.system": "postgresql",\n    "db.operation": "batchLoad",\n    "db.model": "users"\n  },\n  "status": { "code": 0 }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Production Visualization:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Trace: 347cb51fc1fd41662d768bb1142acff1\n\u251c\u2500 POST /graphql (125ms)\n   \u251c\u2500 db:users.batchLoad (45ms)\n   \u251c\u2500 db:organizations.batchLoad (32ms)\n   \u2514\u2500 db:events.batchLoad (28ms)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use descriptive operation names"}),": ",(0,i.jsx)(n.code,{children:'"findByEmail"'})," not ",(0,i.jsx)(n.code,{children:'"query"'})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Wrap only DB operations"}),": Exclude business logic from traced functions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Match model names to tables"}),": Use ",(0,i.jsx)(n.code,{children:'"users"'})," for ",(0,i.jsx)(n.code,{children:"usersTable"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Primary use case"}),": DataLoaders batch loading"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"security-1",children:"Security"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u26a0\ufe0f Never include sensitive data in model/operation names"})}),"\n",(0,i.jsx)(n.p,{children:"What is captured:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Table names, operation types, timing"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Query parameters, result data (not captured)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For production, use TLS/HTTPS for OTLP endpoints and consider sampling (",(0,i.jsx)(n.code,{children:"API_OTEL_SAMPLING_RATIO=0.1"}),")."]}),"\n",(0,i.jsx)(n.h4,{id:"contributor-guidelines",children:"Contributor Guidelines"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["When to use ",(0,i.jsx)(n.code,{children:"traceable"}),":"]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 DataLoader batch functions (required)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Complex multi-table queries"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Simple single-row lookups"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Verify spans locally: Set ",(0,i.jsx)(n.code,{children:"API_OTEL_ENABLED=true"})," and ",(0,i.jsx)(n.code,{children:"API_OTEL_ENVIRONMENT=local"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Tests:"})," ",(0,i.jsx)(n.code,{children:"test/utilities/db/traceableQuery.test.ts"})]}),"\n",(0,i.jsx)(n.h4,{id:"further-reading-1",children:"Further Reading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Implementation: ",(0,i.jsx)(n.code,{children:"src/utilities/db/traceableQuery.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:["DataLoader examples: ",(0,i.jsx)(n.code,{children:"src/utilities/dataloaders/"})]}),"\n",(0,i.jsxs)(n.li,{children:["OpenTelemetry: ",(0,i.jsx)(n.a,{href:"https://opentelemetry.io/docs/instrumentation/js/",children:"https://opentelemetry.io/docs/instrumentation/js/"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},55288:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var s=r(30758);const i={},t=s.createContext(i);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);