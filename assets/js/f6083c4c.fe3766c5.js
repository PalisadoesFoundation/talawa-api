"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[53390],{30110:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"auto-docs/routes/validation/zodReply/functions/zReplyParsed","title":"zReplyParsed","description":"API Docs","source":"@site/docs/auto-docs/routes/validation/zodReply/functions/zReplyParsed.md","sourceDirName":"auto-docs/routes/validation/zodReply/functions","slug":"/auto-docs/routes/validation/zodReply/functions/zReplyParsed","permalink":"/docs/auto-docs/routes/validation/zodReply/functions/zReplyParsed","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa-api/edit/develop/docs/docs/auto-docs/routes/validation/zodReply/functions/zReplyParsed.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"objects","permalink":"/docs/auto-docs/routes/objects/variables/objects"},"next":{"title":"routes","permalink":"/docs/auto-docs/routes/variables/routes"}}');var a=s(86070),d=s(55288);const i={},o=void 0,t={},l=[{value:"Type Parameters",id:"type-parameters",level:2},{value:"TSchema",id:"tschema",level:3},{value:"Parameters",id:"parameters",level:2},{value:"reply",id:"reply",level:3},{value:"schema",id:"schema",level:3},{value:"data",id:"data",level:3},{value:"Returns",id:"returns",level:2},{value:"Examples",id:"examples",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,d.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"/",children:"API Docs"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h1,{id:"function-zreplyparsed",children:"Function: zReplyParsed()"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"zReplyParsed"}),"<",(0,a.jsx)(n.code,{children:"TSchema"}),">(",(0,a.jsx)(n.code,{children:"reply"}),", ",(0,a.jsx)(n.code,{children:"schema"}),", ",(0,a.jsx)(n.code,{children:"data"}),"): ",(0,a.jsx)(n.code,{children:"Promise"}),"<",(0,a.jsx)(n.code,{children:"output"}),"<",(0,a.jsx)(n.code,{children:"TSchema"}),"> | ",(0,a.jsx)(n.code,{children:"undefined"}),">"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Defined in: ",(0,a.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-api/tree/mainsrc/routes/validation/zodReply.ts#L77",children:"src/routes/validation/zodReply.ts:77"})]}),"\n",(0,a.jsx)(n.p,{children:"Validates data against a Zod schema and sends a 400 error response if validation fails."}),"\n",(0,a.jsx)(n.p,{children:"This helper provides unified validation for REST routes by:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Running async validation with Zod's safeParseAsync"}),"\n",(0,a.jsx)(n.li,{children:"Sending a 400 Bad Request response with unified error format on failure"}),"\n",(0,a.jsx)(n.li,{children:"Including flattened error details and correlation ID for debugging"}),"\n",(0,a.jsx)(n.li,{children:"Returning parsed data on success or undefined on failure"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"The function integrates with the unified error handling system by using ErrorCode.INVALID_ARGUMENTS\nand providing a consistent error shape across REST and GraphQL endpoints."}),"\n",(0,a.jsx)(n.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,a.jsx)(n.h3,{id:"tschema",children:"TSchema"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"TSchema"})," ",(0,a.jsx)(n.em,{children:"extends"})," ",(0,a.jsx)(n.code,{children:"ZodType"}),"<",(0,a.jsx)(n.code,{children:"unknown"}),", ",(0,a.jsx)(n.code,{children:"unknown"}),", ",(0,a.jsx)(n.code,{children:"$ZodTypeInternals"}),"<",(0,a.jsx)(n.code,{children:"unknown"}),", ",(0,a.jsx)(n.code,{children:"unknown"}),">>"]}),"\n",(0,a.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsx)(n.h3,{id:"reply",children:"reply"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"FastifyReply"})}),"\n",(0,a.jsx)(n.p,{children:"The Fastify reply object"}),"\n",(0,a.jsx)(n.h3,{id:"schema",children:"schema"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"TSchema"})}),"\n",(0,a.jsx)(n.p,{children:"The Zod schema to validate against"}),"\n",(0,a.jsx)(n.h3,{id:"data",children:"data"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"unknown"})}),"\n",(0,a.jsx)(n.p,{children:"The data to validate (typically request body, params, or query)"}),"\n",(0,a.jsx)(n.h2,{id:"returns",children:"Returns"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Promise"}),"<",(0,a.jsx)(n.code,{children:"output"}),"<",(0,a.jsx)(n.code,{children:"TSchema"}),"> | ",(0,a.jsx)(n.code,{children:"undefined"}),">"]}),"\n",(0,a.jsx)(n.p,{children:"The parsed and validated data, or undefined if validation failed (response already sent)"}),"\n",(0,a.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'// In a Fastify route\nimport { zReplyParsed } from "~/src/routes/validation/zodReply";\nimport { uuid, pagination } from "~/src/graphql/validators/core";\n\nconst listArgs = z.object({\n  q: z.string().optional().default(""),\n  page: pagination.optional().default({ limit: 20, cursor: null }),\n});\n\napp.get("/organizations", async (req, reply) => {\n  const parsed = await zReplyParsed(reply, listArgs, req.query);\n  if (!parsed) return; // Error response already sent\n\n  const { q, page } = parsed;\n  // ...rest of route handler\n});\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'// Validating route params\nconst paramsSchema = z.object({ id: uuid });\n\napp.get("/organizations/:id", async (req, reply) => {\n  const params = await zReplyParsed(reply, paramsSchema, req.params);\n  if (!params) return;\n\n  // params.id is a validated UUID\n});\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'// Error response format\n// {\n//   "error": {\n//     "code": "invalid_arguments",\n//     "message": "Invalid request body",\n//     "details": {\n//       "fieldErrors": {\n//         "id": ["Must be a valid UUID"]\n//       },\n//       "formErrors": []\n//     },\n//     "correlationId": "req-abc123"\n//   }\n// }\n'})})]})}function p(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},55288:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var r=s(30758);const a={},d=r.createContext(a);function i(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);